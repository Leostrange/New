# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ü–†–ò–ú–ï–ù–ï–ù–´

## –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –Ω–∞–π–¥–µ–Ω–∞!

### ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é
–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º: `MainActivity.kt` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `MrComicNavigation`, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–ø—Ä–∞–≤–ª—è–ª –Ω–∞ **—Å–∏–º—É–ª—è—Ü–∏—é** —á—Ç–µ–Ω–∏—è –∫–æ–º–∏–∫—Å–æ–≤ –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö file readers!

### ‚úÖ **–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–∫–ª—é—á–∏–ª–∏ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é
- –ó–∞–º–µ–Ω–∏–ª–∏ `MrComicNavigation` –Ω–∞ `AppNavHost` –≤ `MainActivity.kt`
- –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **—Ä–µ–∞–ª—å–Ω—ã–π** `ReaderScreen` –∏–∑ –º–æ–¥—É–ª—è `feature-reader`
- –ü–æ–¥–∫–ª—é—á–µ–Ω—ã **–Ω–∞—Å—Ç–æ—è—â–∏–µ** CBZ/CBR/PDF readers

---

## üîß –ü—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–ù–∞–≤–∏–≥–∞—Ü–∏—è (–ö–†–ò–¢–ò–ß–ù–û)**
```kotlin
// MainActivity.kt - –ë–´–õ–û:
MrComicNavigation(analyticsHelper, performanceProfiler)

// –°–¢–ê–õ–û:
AppNavHost(navController, onOnboardingComplete = {})
```

### 2. **CBZ Reader**
- ‚úÖ –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ (webp, bmp)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### 3. **CBR Reader**  
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ RAR –∞—Ä—Ö–∏–≤–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ Graceful error handling

### 4. **PDF Reader**
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ–ª—å—à–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (–ª–∏–º–∏—Ç 2048px)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é

### 5. **ReaderViewModel**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü

### 6. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ Factory**
- ‚úÖ –£–ª—É—á—à–µ–Ω `CachingBookReader`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `BookReaderFactory`
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ —Ñ–∞–π–ª–æ–≤

---

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ CBZ —Ñ–∞–π–ª–æ–≤:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–π CBZ —Ñ–∞–π–ª
2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –°—Ç—Ä–∞–Ω–∏—Ü—ã –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –±–µ–∑ –≤—ã–ª–µ—Ç–æ–≤
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**: `"CbzReader"`, `"BookReaderFactory"`

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ CBR —Ñ–∞–π–ª–æ–≤:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–π CBR —Ñ–∞–π–ª  
2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ê—Ä—Ö–∏–≤ –¥–æ–ª–∂–µ–Ω –∏–∑–≤–ª–µ–∫–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**: `"CbrReader"`, `"Archive opened"`

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ PDF —Ñ–∞–π–ª–æ–≤:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –º–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π PDF
2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**: `"PdfReader"`, `"Successfully rendered page"`
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ UI**: –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–º —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º

### –û–±—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:
- ‚úÖ –¢–∞–ø –ø–æ –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞ = —Å–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- ‚úÖ –¢–∞–ø –ø–æ –ª–µ–≤–æ–π —á–∞—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞ = –ø—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞  
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤—ã–ª–µ—Ç–æ–≤ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±–ª–æ–∂–∫–∏ –∏ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

---

## üì± –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –í Android Studio -> Logcat –Ω–∞–π–¥–∏—Ç–µ:
```
ReaderViewModel: Opening book: [URI]
BookReaderFactory: Creating [FORMAT] reader  
[Format]Reader: Successfully opened [FORMAT] with X pages
ReaderViewModel: Page X loaded successfully
```

### –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –∏—â–∏—Ç–µ:
```
ERROR: Failed to open [FORMAT] file
WARNING: Failed to decode bitmap
ERROR: Invalid page index
```

---

## üöÄ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–æ–¥–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `android/app/src/main/java/com/example/mrcomic/MainActivity.kt` ‚Üê **–ì–õ–ê–í–ù–û–ï –ò–ó–ú–ï–ù–ï–ù–ò–ï**
- `android/feature-reader/src/main/java/com/example/feature/reader/data/CbzReader.kt`
- `android/feature-reader/src/main/java/com/example/feature/reader/data/CbrReader.kt`  
- `android/feature-reader/src/main/java/com/example/feature/reader/data/PdfReader.kt`
- `android/feature-reader/src/main/java/com/example/feature/reader/ui/ReaderViewModel.kt`

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- ‚úÖ `zip4j` –¥–ª—è CBZ —Ñ–∞–π–ª–æ–≤
- ‚úÖ `pdfium-android` –¥–ª—è PDF —Ñ–∞–π–ª–æ–≤
- ‚úÖ `junrar` –¥–ª—è CBR —Ñ–∞–π–ª–æ–≤

---

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ï—Å–ª–∏ CBZ –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `zip4j` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω
2. **–ï—Å–ª–∏ PDF –Ω–µ –Ω–∞–≤–∏–≥–∏—Ä—É–µ—Ç—Å—è**: –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π PdfiumCore
3. **–ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤—ã–ª–µ—Ç–∞–µ—Ç**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ –≤ readers

---

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞—é—Ç—Å—è:
1. **–°–æ–±–µ—Ä–∏—Ç–µ –ª–æ–≥–∏** –∏–∑ Android Studio Logcat
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏** (–º–∞–ª–µ–Ω—å–∫–∏–µ/–±–æ–ª—å—à–∏–µ, —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã)
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** –≤ `gradle/libs.versions.toml`

**–ù–æ —Å –≤—ã—Å–æ–∫–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é –≤—Å–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å!** üéâ