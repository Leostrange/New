# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Ä–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

## üìã –ü—Ä–æ–±–ª–µ–º—ã –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Ä–µ—à–µ–Ω—ã

### üö® –ò—Å—Ö–æ–¥–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–æ–¥—É–ª–µ–π**: –ú–æ–¥—É–ª–∏ `reader`, `src`, `themes_store` –≤ –∫–æ—Ä–Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞–ª–∏ —Å Android –º–æ–¥—É–ª—è–º–∏
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏**: `include(":app")` –Ω–æ —Ñ–∞–π–ª—ã –≤ `android/app/`
3. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ Reader –∫–ª–∞—Å—Å—ã –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
4. **–ü—É—Ç–∞–Ω–∏—Ü–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**: app –º–æ–¥—É–ª—å –Ω–µ –∑–Ω–∞–ª –∫–∞–∫–æ–π feature-reader –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### ‚úÖ –†–µ—à–µ–Ω–∏–µ:
–†–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –≤ **—á–∏—Å—Ç—É—é Android –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –Ω–µ–π–º—Å–ø–µ–π—Å–∏–Ω–≥–æ–º.

---

## üèóÔ∏è –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
MrComic/
‚îú‚îÄ‚îÄ android/                          # üéØ –û—Å–Ω–æ–≤–Ω–æ–µ Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ app/                         # –ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è 
‚îÇ   ‚îú‚îÄ‚îÄ core-analytics/              # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ core-data/                   # –°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ core-domain/                 # –ë–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ core-model/                  # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ core-reader/                 # –ë–∞–∑–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è —á—Ç–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ core-ui/                     # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ feature-library/             # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫–æ–º–∏–∫—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ feature-ocr/                 # OCR —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ feature-onboarding/          # –û–Ω–±–æ—Ä–¥–∏–Ω–≥
‚îÇ   ‚îú‚îÄ‚îÄ feature-reader/              # üìñ –û–°–ù–û–í–ù–û–ô –ú–û–î–£–õ–¨ –ß–¢–ï–ù–ò–Ø –§–ê–ô–õ–û–í
‚îÇ   ‚îú‚îÄ‚îÄ feature-settings/            # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ feature-themes/              # –¢–µ–º—ã
‚îÇ   ‚îî‚îÄ‚îÄ shared/                      # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ scripts/                         # –°–∫—Ä–∏–ø—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ reports/                         # –û—Ç—á–µ—Ç—ã —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ archive/                         # üóÑÔ∏è –ê—Ä—Ö–∏–≤ —Å—Ç–∞—Ä—ã—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ legacy-reader-files/         # –°—Ç–∞—Ä—ã–µ reader —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ legacy-src/                  # –°—Ç–∞—Ä–∞—è –ø–∞–ø–∫–∞ src
‚îÇ   ‚îî‚îÄ‚îÄ legacy-themes_store/         # –°—Ç–∞—Ä–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ç–µ–º
‚îú‚îÄ‚îÄ gradle/                          # Gradle –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ settings.gradle.kts              # ‚úÖ –ù–æ–≤—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥—É–ª–µ–π
‚îî‚îÄ‚îÄ build.gradle.kts                 # ‚úÖ –ù–æ–≤—ã–π –∫–æ—Ä–Ω–µ–≤–æ–π build —Ñ–∞–π–ª
```

---

## üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### `settings.gradle.kts` - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –º–æ–¥—É–ª–µ–π:
```kotlin
// –í–°–ï Android –º–æ–¥—É–ª–∏ —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–º–µ–Ω–æ–≤–∞–Ω—ã:
include(":android:app")
project(":android:app").projectDir = file("android/app")

include(":android:feature-reader")  // üìñ –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å —á—Ç–µ–Ω–∏—è
project(":android:feature-reader").projectDir = file("android/feature-reader")

// –ö–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –º–æ–¥—É–ª–∏ —É–¥–∞–ª–µ–Ω—ã:
// include(":reader")      ‚ùå –£–î–ê–õ–ï–ù
// include(":src")         ‚ùå –£–î–ê–õ–ï–ù
// include(":themes_store") ‚ùå –£–î–ê–õ–ï–ù
```

### –í—Å–µ `build.gradle.kts` –æ–±–Ω–æ–≤–ª–µ–Ω—ã:
```kotlin
// –°—Ç–∞—Ä—ã–µ —Å—Å—ã–ª–∫–∏:
implementation(project(":feature-reader"))      ‚ùå

// –ù–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏:  
implementation(project(":android:feature-reader")) ‚úÖ
```

---

## üìñ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

### –ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤:
1. **MainActivity** ‚Üí **AppNavHost** ‚Üí **ReaderScreen**
2. **ReaderScreen** ‚Üí **ReaderViewModel** ‚Üí **BookReaderFactory**
3. **BookReaderFactory** —Å–æ–∑–¥–∞–µ—Ç –Ω—É–∂–Ω—ã–π reader:
   - **CbzReader** –¥–ª—è `.cbz` —Ñ–∞–π–ª–æ–≤ (—Å zip4j)
   - **CbrReader** –¥–ª—è `.cbr` —Ñ–∞–π–ª–æ–≤ (—Å junrar)  
   - **PdfReader** –¥–ª—è `.pdf` —Ñ–∞–π–ª–æ–≤ (—Å pdfium-android)
4. **CachingBookReader** –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç reader –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤:
```kotlin
// –í android/feature-reader/build.gradle.kts:
implementation(libs.zip4j)           // CBZ support
implementation(libs.junrar)          // CBR support  
implementation(libs.pdfium-android)  // PDF support
```

---

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Å–±–æ—Ä–∫–µ

### 1. –û—Ç–∫—Ä—ã—Ç–∏–µ –≤ Android Studio:
- –û—Ç–∫—Ä–æ–π—Ç–µ **–∫–æ—Ä–Ω–µ–≤—É—é –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞** (–Ω–µ android/)
- Android Studio –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –ú–æ–¥—É–ª–∏ –±—É–¥—É—Ç –ø–æ–∫–∞–∑–∞–Ω—ã –∫–∞–∫ `:android:app`, `:android:feature-reader` –∏ —Ç.–¥.

### 2. –ö–æ–º–∞–Ω–¥—ã —Å–±–æ—Ä–∫–∏:
```bash
# –°–æ–±—Ä–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
./gradlew :android:app:build

# –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞  
./gradlew checkStructure

# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –º–æ–¥—É–ª–∏
./gradlew modules

# –û—á–∏—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
./gradlew clean
```

### 3. –û—Ç–ª–∞–¥–∫–∞:
–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Logcat –∏—â–∏—Ç–µ:
```
üèóÔ∏è RESTRUCTURED ANDROID PROJECT STARTED üèóÔ∏è
‚úÖ Using correct :android:feature-reader module
‚úÖ AppNavHost navigation (not MrComicNavigation)
```

---

## üîç –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ feature –º–æ–¥—É–ª—è:
1. –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É `android/feature-–Ω–æ–≤—ã–π/`
2. –î–æ–±–∞–≤–∏—Ç—å –≤ `settings.gradle.kts`:
   ```kotlin
   include(":android:feature-–Ω–æ–≤—ã–π")
   project(":android:feature-–Ω–æ–≤—ã–π").projectDir = file("android/feature-–Ω–æ–≤—ã–π")
   ```
3. –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤ `android/app/build.gradle.kts`:
   ```kotlin
   implementation(project(":android:feature-–Ω–æ–≤—ã–π"))
   ```

### –ü—Ä–∞–≤–∏–ª–∞ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è:
- **–í—Å–µ Android –º–æ–¥—É–ª–∏**: `:android:*`
- **Core –º–æ–¥—É–ª–∏**: `:android:core-*`
- **Feature –º–æ–¥—É–ª–∏**: `:android:feature-*`
- **–£—Ç–∏–ª–∏—Ç—ã**: `:scripts`, `:reports` (–±–µ–∑ android: –ø—Ä–µ—Ñ–∏–∫—Å–∞)

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å —É –Ω–∞—Å **—á–∏—Å—Ç–∞—è, –ø–æ–Ω—è—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–æ–¥—É–ª–µ–π –∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ä–æ—É—Ç–∏–Ω–≥–æ–º –∫ **–Ω–∞—Å—Ç–æ—è—â–∏–º** reader'–∞–º –¥–ª—è CBZ/CBR/PDF —Ñ–∞–π–ª–æ–≤.

**–í—Å–µ —Ñ–∞–π–ª—ã —Ç–µ–ø–µ—Ä—å –±—É–¥—É—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è android:feature-reader –º–æ–¥—É–ª–µ–º!** üéâ