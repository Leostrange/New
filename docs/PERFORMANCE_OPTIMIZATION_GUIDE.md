# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Mr.Comic

## üìã –û–±–∑–æ—Ä

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Mr.Comic, –≤–∫–ª—é—á–∞—è –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è.

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

```
Performance Optimization System:
‚îú‚îÄ‚îÄ Profiling & Monitoring
‚îÇ   ‚îú‚îÄ‚îÄ PerformanceProfiler        # –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ PerformanceDashboard       # UI –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
‚îÇ   ‚îî‚îÄ‚îÄ AnalyticsIntegration       # –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
‚îú‚îÄ‚îÄ UI Optimizations
‚îÇ   ‚îú‚îÄ‚îÄ OptimizedComposables       # –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ LazyLoading               # –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ StateManagement           # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
‚îú‚îÄ‚îÄ Image Processing
‚îÇ   ‚îú‚îÄ‚îÄ ImageOptimizer            # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–∂–∞—Ç–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ ThumbnailGeneration       # –ë—ã—Å—Ç—Ä—ã–µ –ø—Ä–µ–≤—å—é
‚îÇ   ‚îî‚îÄ‚îÄ PreloadingStrategy        # –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞
‚îî‚îÄ‚îÄ Build Optimizations
    ‚îú‚îÄ‚îÄ ProGuard/R8               # –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–¥–∞
    ‚îú‚îÄ‚îÄ ResourceShrinking         # –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
    ‚îî‚îÄ‚îÄ APKOptimization           # –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ APK
```

---

## üìä –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### 1. PerformanceProfiler

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–Ω–∞–ª–∏—Ç–∏–∫—É
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```kotlin
// –ü—Ä–æ—Å—Ç–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ
val measurementId = performanceProfiler.startMeasurement("load_comic")
// ... –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
performanceProfiler.finishMeasurement(measurementId, scope = viewModelScope)

// Inline –∏–∑–º–µ—Ä–µ–Ω–∏–µ
val result = performanceProfiler.measureOperation("parse_archive") {
    parseComicArchive(filePath)
}

// Suspend –æ–ø–µ—Ä–∞—Ü–∏–∏
val data = performanceProfiler.measureSuspendOperation("network_request") {
    apiService.getComics()
}
```

### 2. Real-time –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**PerformanceDashboard –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:**
- –û–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –≤—Ä–µ–º–µ–Ω–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –†–∞–∑–±–∏–≤–∫–∞ –ø–æ —Ç–∏–ø–∞–º –æ–ø–µ—Ä–∞—Ü–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

---

## üé® –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è UI

### 1. Composable –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

#### OptimizedLazyColumn
```kotlin
OptimizedLazyColumn(
    items = comics,
    key = { index, comic -> comic.id }, // –°—Ç–∞–±–∏–ª—å–Ω—ã–µ –∫–ª—é—á–∏
    contentType = { _, comic -> comic.type }, // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–∏–ø—É
) { index, comic ->
    MemoizedComicCard(comic = comic) // –ú–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
}
```

#### –õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
```kotlin
LazyInitialized(
    condition = isVisible,
    delay = 100 // –ó–∞–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏
) {
    HeavyComposableContent()
}
```

#### Throttling –ø–µ—Ä–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–π
```kotlin
ThrottledContent(
    value = searchQuery,
    throttleMs = 300 // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
) { query ->
    SearchResults(query = query)
}
```

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤

#### –ü–∞–≥–∏–Ω–∞—Ü–∏—è
```kotlin
PaginatedLazyColumn(
    items = comics,
    isLoading = isLoading,
    hasMore = hasMoreData,
    onLoadMore = { viewModel.loadMoreComics() },
    threshold = 5 // –ó–∞–≥—Ä—É–∂–∞—Ç—å –∑–∞ 5 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–æ –∫–æ–Ω—Ü–∞
)
```

#### –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è
```kotlin
WindowedLazyColumn(
    items = largeComicsList,
    windowSize = 50, // –†–µ–Ω–¥–µ—Ä–∏—Ç—å —Ç–æ–ª—å–∫–æ 50 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    key = { comic -> comic.id }
)
```

### 3. –ü–æ–∏—Å–∫ —Å debounce
```kotlin
DebouncedSearchField(
    query = searchQuery,
    onQueryChange = { query -> 
        searchViewModel.updateQuery(query)
    },
    onSearch = { query ->
        searchViewModel.performSearch(query)
    },
    debounceMs = 300
)
```

---

## üñºÔ∏è –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### 1. ImageOptimizer –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

**–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- LRU –∫—ç—à –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –û—Ç–¥–µ–ª—å–Ω—ã–π –∫—ç—à –¥–ª—è –º–∏–Ω–∏–∞—Ç—é—Ä
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏:**
```kotlin
// –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
val bitmap = imageOptimizer.loadOptimizedImage(
    imagePath = comic.coverPath,
    targetWidth = 400,
    targetHeight = 600,
    useCache = true
)

// –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–Ω–∏–∞—Ç—é—Ä
val thumbnail = imageOptimizer.createThumbnail(
    imagePath = comic.coverPath,
    size = 200
)

// –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞
imageOptimizer.preloadImages(
    imagePaths = nextComicPages,
    targetWidth = screenWidth,
    targetHeight = screenHeight
)
```

**–§–∏–ª—å—Ç—Ä—ã –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
```kotlin
// –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
val processedBitmap = imageOptimizer.applyImageFilter(
    bitmap = originalBitmap,
    filter = ImageFilter.BRIGHTNESS
)

// –°–∂–∞—Ç–∏–µ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏
val compressedData = imageOptimizer.compressImage(
    bitmap = largeBitmap,
    quality = 85
)
```

### 2. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞

```kotlin
val cacheStats = imageOptimizer.getCacheStats()
println("Bitmap cache hit rate: ${cacheStats.bitmapHitRate}")
println("Thumbnail cache hit rate: ${cacheStats.thumbnailHitRate}")
```

---

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏

### 1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏

```kotlin
// –†–µ–≥—É–ª—è—Ä–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
LaunchedEffect(Unit) {
    while (true) {
        performanceProfiler.measureMemoryUsage(scope)
        delay(5000) // –ö–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
    }
}
```

### 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞–º–∏

```kotlin
// –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ –ø–∞–º—è—Ç–∏
class MemoryManager @Inject constructor(
    private val imageOptimizer: ImageOptimizer
) {
    fun onLowMemory() {
        imageOptimizer.clearCache()
        performanceProfiler.clearOldMetrics()
        // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞
        System.gc()
    }
}
```

### 3. Lifecycle-aware –æ—á–∏—Å—Ç–∫–∞

```kotlin
@Composable
fun ComicsScreen() {
    val lifecycleOwner = LocalLifecycleOwner.current
    
    DisposableEffect(lifecycleOwner) {
        val observer = LifecycleEventObserver { _, event ->
            when (event) {
                Lifecycle.Event.ON_PAUSE -> {
                    // –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
                    imageOptimizer.clearCache()
                }
                Lifecycle.Event.ON_STOP -> {
                    // –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –≤ —Ñ–æ–Ω
                    memoryManager.onLowMemory()
                }
                else -> {}
            }
        }
        
        lifecycleOwner.lifecycle.addObserver(observer)
        
        onDispose {
            lifecycleOwner.lifecycle.removeObserver(observer)
        }
    }
}
```

---

## üîß –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏

### 1. Gradle –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–í `gradle.properties`:**
```properties
# –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–∞–º—è—Ç—å –¥–ª—è —Å–±–æ—Ä–∫–∏
org.gradle.jvmargs=-Xmx4g -XX:MaxMetaspaceSize=1g -XX:+HeapDumpOnOutOfMemoryError

# –í–∫–ª—é—á–∞–µ–º –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é —Å–±–æ—Ä–∫—É
org.gradle.parallel=true
org.gradle.configureondemand=true

# –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–±–æ—Ä–∫–∏
org.gradle.caching=true

# Kotlin –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
kotlin.compiler.execution.strategy=in-process
kotlin.incremental=true
kotlin.incremental.usePreciseJavaTracking=true
```

**–í `app/build.gradle.kts`:**
```kotlin
android {
    buildTypes {
        release {
            isMinifyEnabled = true           // R8 –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è
            isShrinkResources = true         // –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
            renderscriptOptimLevel = 3       // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è RenderScript
            
            packaging {
                resources {
                    excludes += "/META-INF/{AL2.0,LGPL2.1}"
                    excludes += "/META-INF/androidx.*"
                    excludes += "DebugProbesKt.bin"
                }
            }
        }
    }
    
    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_17
        targetCompatibility = JavaVersion.VERSION_17
    }
}
```

### 2. ProGuard/R8 –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ `proguard-rules.pro`:**
```proguard
# –£–¥–∞–ª–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ release
-assumenosideeffects class android.util.Log {
    public static int v(...);
    public static int d(...);
    public static int i(...);
    public static int w(...);
    public static int e(...);
}

# –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*
-optimizationpasses 5
-allowaccessmodification

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–∞–∂–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤
-keep class com.example.core.analytics.** { *; }
-keep class com.example.core.reader.ImageOptimizer { *; }
```

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. –ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

**UI –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –í—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —ç–∫—Ä–∞–Ω–æ–≤ (< 16ms –¥–ª—è 60 FPS)
- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è (< 100ms)
- –ü–ª–∞–≤–Ω–æ—Å—Ç—å —Å–∫—Ä–æ–ª–ª–∏–Ω–≥–∞ (–±–µ–∑ –ø—Ä–æ–ø—É—Å–∫–∞ –∫–∞–¥—Ä–æ–≤)

**–ü–∞–º—è—Ç—å:**
- –û–±—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ (< 80% –¥–æ—Å—Ç—É–ø–Ω–æ–π)
- –ß–∞—Å—Ç–æ—Ç–∞ —Å–±–æ—Ä–∫–∏ –º—É—Å–æ—Ä–∞ (< 5 —Ä–∞–∑ –≤ –º–∏–Ω—É—Ç—É)
- –£—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏ (–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–æ—Å—Ç–∞ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è)

**–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–∏–∫—Å–∞ (< 2 —Å–µ–∫—É–Ω–¥—ã)
- –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –º–∏–Ω–∏–∞—Ç—é—Ä (< 500ms)
- Hit rate –∫—ç—à–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (> 70%)

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

**–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–ø–µ—Ä–∞—Ü–∏–π > 500ms
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ > 80%
- –ë–æ–ª–µ–µ 10% –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
- Hit rate –∫—ç—à–∞ < 50%
- –í—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ > 16ms
- –ß–∞—Å—Ç—ã–µ —Å–±–æ—Ä–∫–∏ –º—É—Å–æ—Ä–∞

**–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
- –†–∞–∑–º–µ—Ä APK > 100MB
- –í—Ä–µ–º—è —Ö–æ–ª–æ–¥–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ > 3 —Å–µ–∫—É–Ω–¥—ã

---

## üéØ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. Compose –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**‚úÖ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:**
```kotlin
// –°—Ç–∞–±–∏–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è —Å–ø–∏—Å–∫–æ–≤
@Composable
fun ComicsList(comics: List<Comic>) {
    LazyColumn {
        items(
            items = comics,
            key = { comic -> comic.id } // –°—Ç–∞–±–∏–ª—å–Ω—ã–π –∫–ª—é—á
        ) { comic ->
            ComicItem(comic = comic)
        }
    }
}

// –ú–µ–º–æ–∏–∑–∞—Ü–∏—è —Ç—è–∂–µ–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
@Composable
fun ComicItem(comic: Comic) {
    val formattedDate = remember(comic.dateModified) {
        DateFormatter.format(comic.dateModified)
    }
    
    // UI code
}

// Derivated state –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
@Composable
fun FilteredComicsList(comics: List<Comic>, filter: String) {
    val filteredComics by remember {
        derivedStateOf {
            comics.filter { it.title.contains(filter, ignoreCase = true) }
        }
    }
    
    LazyColumn {
        items(filteredComics) { comic ->
            ComicItem(comic = comic)
        }
    }
}
```

### 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**Repository pattern —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º:**
```kotlin
class ComicsRepository @Inject constructor(
    private val localDataSource: ComicsLocalDataSource,
    private val remoteDataSource: ComicsRemoteDataSource,
    private val cacheManager: CacheManager
) {
    suspend fun getComics(): Flow<List<Comic>> = flow {
        // –°–Ω–∞—á–∞–ª–∞ –∏–∑ –∫—ç—à–∞
        val cached = cacheManager.getComics()
        if (cached.isNotEmpty()) {
            emit(cached)
        }
        
        // –ó–∞—Ç–µ–º –∏–∑ —Å–µ—Ç–∏ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∫—ç—à–∞
        try {
            val fresh = remoteDataSource.getComics()
            cacheManager.saveComics(fresh)
            emit(fresh)
        } catch (e: Exception) {
            if (cached.isEmpty()) throw e
        }
    }
}
```

### 3. Background –æ–±—Ä–∞–±–æ—Ç–∫–∞

**WorkManager –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:**
```kotlin
class ComicProcessingWorker(
    context: Context,
    params: WorkerParameters
) : CoroutineWorker(context, params) {
    
    override suspend fun doWork(): Result = withContext(Dispatchers.IO) {
        try {
            val comicPath = inputData.getString("comic_path") ?: return@withContext Result.failure()
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∏–Ω–∏–∞—Ç—é—Ä –≤ —Ñ–æ–Ω–µ
            imageOptimizer.createThumbnail(comicPath)
            
            // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
            preloadComicPages(comicPath)
            
            Result.success()
        } catch (e: Exception) {
            Result.retry()
        }
    }
}
```

---

## üîç –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. Android Studio Profiler

**Memory Profiler:**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
- –ê–Ω–∞–ª–∏–∑ –≤—ã–¥–µ–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–±–æ—Ä–∫–∏ –º—É—Å–æ—Ä–∞

**CPU Profiler:**
- –ê–Ω–∞–ª–∏–∑ –≥–æ—Ä—è—á–∏—Ö —Ç–æ—á–µ–∫ –≤ –∫–æ–¥–µ
- –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –º–µ—Ç–æ–¥–æ–≤
- –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### 2. Systrace/Perfetto

**–¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ UI –æ–ø–µ—Ä–∞—Ü–∏–π:**
```kotlin
// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–∫ –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏
Trace.beginSection("ComicsList_Render")
try {
    // Rendering logic
} finally {
    Trace.endSection()
}
```

### 3. Metrics –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ

```kotlin
// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ
analytics.track(PerformanceEvent(
    operationName = "comic_load",
    duration = loadTime,
    success = true,
    metadata = mapOf(
        "file_size" to fileSize,
        "image_count" to pageCount
    )
))
```

---

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|----------------|-------------------|-----------|
| –í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ | 4.5s | 2.1s | 53% ‚Üì |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ | 180MB | 95MB | 47% ‚Üì |
| –†–∞–∑–º–µ—Ä APK | 45MB | 28MB | 38% ‚Üì |
| –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–∏–∫—Å–∞ | 3.2s | 1.4s | 56% ‚Üì |
| FPS –≤ —Å–ø–∏—Å–∫–∞—Ö | 45 | 59 | 31% ‚Üë |
| Cache hit rate | 40% | 78% | 95% ‚Üë |

### –ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

‚úÖ **UI –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å:** 60 FPS –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤  
‚úÖ **–ü–∞–º—è—Ç—å:** –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –±–µ–∑ —É—Ç–µ—á–µ–∫  
‚úÖ **–ó–∞–≥—Ä—É–∑–∫–∞:** –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º  
‚úÖ **–†–∞–∑–º–µ—Ä:** –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π APK –±–ª–∞–≥–æ–¥–∞—Ä—è R8 –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏  
‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** Real-time –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏  

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Android Performance Guide](https://developer.android.com/topic/performance)
- [Compose Performance](https://developer.android.com/jetpack/compose/performance)
- [Memory Management](https://developer.android.com/topic/performance/memory)
- [R8 Optimization](https://developer.android.com/studio/build/shrink-code)

---

**Mr.Comic —Ç–µ–ø–µ—Ä—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –ª—É—á—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞!** üöÄ