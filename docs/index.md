# Документация проекта Mr.Comic

Этот раздел содержит подробное описание структуры проекта Mr.Comic, его основных компонентов, файлов и их назначения. Цель этой документации — помочь разработчикам и контрибьюторам быстро ориентироваться в кодовой базе и понимать, за что отвечает каждый модуль.

## Общая структура проекта

Проект Mr.Comic организован следующим образом:

-   `src/`: Основной исходный код приложения, разделенный на модули по функциональному назначению.
-   `tests/`: Тесты для различных компонентов проекта (юнит-тесты, инструментальные тесты, интеграционные тесты).
-   `themes_store/`: Хранилище для тем оформления приложения.
-   `docs/`: Данная документация.
-   `README.md`: Общее описание проекта и инструкции по быстрому старту.
-   `TASKLIST.md`: Подробный план разработки и список выполненных задач.

## Подробное описание директорий




### `src/`

Директория `src/` содержит основной исходный код приложения Mr.Comic. Она разделена на множество поддиректорий, каждая из которых отвечает за определенный функциональный блок.

#### `src/annotations/`

Этот модуль отвечает за функциональность, связанную с аннотациями в комиксах. Он включает в себя логику для экспорта, импорта, управления и интеграции аннотаций, а также активности для их отображения и взаимодействия с ними.

-   `AnnotationExportImport.js`: Скрипты для экспорта и импорта аннотаций.
-   `AnnotationExportImportUI.js`: Пользовательский интерфейс для функций экспорта/импорта аннотаций.
-   `AnnotationManager.js`: Основная логика управления аннотациями.
-   `AnnotationManagerActivity.kt`: Активность Kotlin для управления аннотациями.
-   `AnnotationIntegration.js`: Интеграция аннотаций с другими частями приложения.
-   `IntelligentAnnotationService.kt`: Сервис для интеллектуальной обработки аннотаций.
-   `index.js`: Точка входа или агрегатор для модуля аннотаций.

#### `src/backup/`

Модуль для управления резервным копированием данных приложения.

-   `BackupIntegration.js`: Интеграция функций резервного копирования.
-   `BackupManager.js`: Логика управления резервным копированием.
-   `BackupUI.js`: Пользовательский интерфейс для функций резервного копирования.
-   `index.js`: Точка входа или агрегатор для модуля резервного копирования.

#### `src/cache/`

Модуль для управления кэшированием данных, в частности, кэшем переводов.

-   `TranslationCacheManager.js`: Менеджер для управления кэшем переводов.
-   `index.js`: Точка входа или агрегатор для модуля кэширования.

#### `src/cloud/`

Модуль для интеграции с облачными сервисами, такими как Google Drive, для хранения и синхронизации данных.

-   `GoogleDriveIntegration.js`: Интеграция с Google Drive.
-   `GoogleDriveManager.js`: Менеджер для управления взаимодействием с Google Drive.
-   `GoogleDriveUI.js`: Пользовательский интерфейс для функций Google Drive.
-   `index.js`: Точка входа или агрегатор для модуля облачных сервисов.

#### `src/collaboration/`

Модуль для реализации функций совместной работы в реальном времени.

-   `RealtimeCollaborationSystem.kt`: Система совместной работы в реальном времени на Kotlin.

#### `src/debug/`

Модуль, содержащий утилиты и инструменты для отладки приложения.

-   `BugFixRegistry.js`: Реестр исправлений ошибок.
-   `DebugUtils.js`: Различные утилиты для отладки.
-   `ErrorHandler.js`: Обработчик ошибок (также присутствует в `src/exceptions`).

#### `src/exceptions/`

Модуль для централизованной обработки исключений и логирования ошибок.

-   `ErrorHandler.js`: Централизованный обработчик ошибок.
-   `ExceptionHierarchy.js`: Определение иерархии исключений.
-   `ExceptionStrategies.js`: Стратегии обработки исключений.
-   `LoggingIntegration.js`: Интеграция системы логирования.
-   `Logger.js`: Утилиты для логирования.
-   `RecoveryManager.js`: Менеджер для восстановления после ошибок.
-   `index.js`: Точка входа или агрегатор для модуля исключений.

#### `src/features/`

Директория, содержащая подмодули для различных функций приложения.

-   `annotations/`: Функции, связанные с аннотациями (дублирует часть функционала `src/annotations`).
    -   `AnnotationsExportImport.js`: Экспорт/импорт аннотаций.
    -   `index.js`
-   `bookmarks_viewer/`: Функции для просмотра закладок.
    -   `BookmarksViewer.js`: Логика просмотра закладок.
    -   `index.js`
-   `sync/`: Функции синхронизации.
    -   `JsonSynchronization.js`: Синхронизация данных в формате JSON.
    -   `index.js`

#### `src/formats/`

Модуль для обработки различных форматов комиксов и книг.

-   `CBRFormatHandler.js`: Обработчик формата CBR.
-   `CBRParser.js`: Парсер для CBR файлов.
-   `CBZFormatHandler.js`: Обработчик формата CBZ.
-   `CBZParser.js`: Парсер для CBZ файлов.
-   `EPUBFormatHandler.js`: Обработчик формата EPUB.
-   `EPUBParser.js`: Парсер для EPUB файлов.
-   `EPUBParserWithFallback.js`: Парсер EPUB с fallback-логикой.
-   `EPUBWebViewIntegration.js`: Интеграция EPUB с WebView.
-   `FormatParserFallbackManager.js`: Менеджер fallback-стратегий для парсеров форматов.
-   `MOBIFormatHandler.js`: Обработчик формата MOBI.
-   `MOBIParser.js`: Парсер для MOBI файлов.
-   `MOBIParserWithFallback.js`: Парсер MOBI с fallback-логикой.
-   `PDFFormatHandler.js`: Обработчик формата PDF.
-   `PDFParser.js`: Парсер для PDF файлов.
-   `PDFParserWithFallback.js`: Парсер PDF с fallback-логикой.
-   `index.js`: Точка входа или агрегатор для модуля форматов.

#### `src/integration/`

Модуль для интеграции различных редакторов и плагинов.

-   `OCREditorIntegration.js`: Интеграция с редактором OCR.
-   `PluginEditorIntegration.js`: Интеграция с редактором плагинов.
-   `PluginExtensionManager.js`: Менеджер расширений плагинов.
-   `TranslationEditorIntegration.js`: Интеграция с редактором переводов.
-   `UnifiedEditorInterface.js`: Унифицированный интерфейс редактора.

#### `src/ocr/`

Основной модуль для оптического распознавания символов.

-   `BatchProcessingIntegration.js`: Интеграция пакетной обработки.
-   `BatchProcessor.js`: Процессор для пакетной обработки.
-   `OCREngineSelector.js`: Селектор движков OCR.
-   `OcrManager.js`: Менеджер OCR.
-   `RevolutionaryOCRSystem.py`: Основная система OCR (Python).
-   `SpeechBubbleDetector.js`: Детектор облачков речи.
-   `UserDataManager.js`: Менеджер пользовательских данных.
-   `UserDataTrainer.js`: Тренер пользовательских данных.
-   `UserDataTrainingIntegration.js`: Интеграция обучения пользовательских данных.

#### `src/optimization/`

Модуль для оптимизации производительности и управления ресурсами.

-   `PerformanceOptimizer.js`: Оптимизатор производительности.
-   `ResourceAudit.js`: Аудит ресурсов.
-   `ResourceManager.js`: Менеджер ресурсов.
-   `index.js`: Точка входа или агрегатор для модуля оптимизации.

#### `src/plugin/`

Модуль для управления плагинами и их безопасностью.

-   `AdvancedPluginManager.kt`: Расширенный менеджер плагинов на Kotlin.
-   `AdvancedPluginMarketplace.java`: Маркетплейс плагинов на Java.
-   `AdvancedPluginSDK.java`: SDK для расширенных плагинов на Java.
-   `AdvancedPluginSecurity.kt`: Безопасность расширенных плагинов на Kotlin.

#### `src/profile/`

Модуль для управления пользовательскими профилями.

-   `ProfileManager.js`: Менеджер профилей.

#### `src/quality/`

Модуль для системы контроля качества.

-   `QualityValidationSystem.py`: Система валидации качества на Python.

#### `src/reader/`

Модуль, содержащий основной движок для чтения комиксов.

-   `AdvancedComicReaderEngine.kt`: Расширенный движок для чтения комиксов на Kotlin.

#### `src/release/`

Модуль для управления процессами выпуска и релизов.

-   `BugTracker.js`: Трекер ошибок.
-   `MarketingMaterialsGenerator.js`: Генератор маркетинговых материалов.
-   `ReleaseManager.js`: Менеджер релизов.
-   `ReleasePackager.js`: Упаковщик релизов.
-   `ReleaseValidator.js`: Валидатор релизов.

#### `src/sdk_templates/`

Шаблоны для SDK плагинов.

-   `SampleOcrPluginTemplate.kt`: Пример шаблона OCR плагина на Kotlin.

#### `src/sync/`

Модуль для синхронизации данных.

-   `SyncIntegration.js`: Интеграция синхронизации.
-   `SyncManager.js`: Менеджер синхронизации.
-   `SyncUI.js`: Пользовательский интерфейс синхронизации.
-   `index.js`: Точка входа или агрегатор для модуля синхронизации.

#### `src/system/`

Модуль для системных компонентов и интеграций.

-   `BlockchainIntegration.java`: Интеграция с блокчейном на Java.
-   `FederatedLearningSystem.java`: Система федеративного обучения на Java.
-   `FontSystem.kt`: Система шрифтов на Kotlin.
-   `PersonalizationSystem.kt`: Система персонализации на Kotlin.

#### `src/test/`

Модуль, содержащий тестовые файлы для различных компонентов.

-   `plugin/`: Тесты для плагинов.
    -   `PluginManagerTest.kt`: Тесты менеджера плагинов.
-   `ui/`: Тесты для пользовательского интерфейса.
    -   `ThemeCustomizationTests.js`: Тесты кастомизации тем.

#### `src/translation/`

Основной модуль для перевода текста.

-   `AdvancedTranslationOverlay.py`: Расширенное наложение перевода на Python.
-   `TranslationEngineSelector.js`: Селектор движков перевода.
-   `TranslationManager.js`: Менеджер переводов.
-   `UniversalTranslationSystem.py`: Универсальная система перевода на Python.

#### `src/ui/`

Модуль для пользовательского интерфейса и связанных с ним компонентов.

-   `AnimationDemo.js`: Демонстрация анимаций.
-   `AnimationIntegration.js`: Интеграция анимаций.
-   `AnimationManager.js`: Менеджер анимаций.
-   `BackupManagerPanel.js`: Панель управления резервным копированием.
-   `BookmarkViewer.js`: Просмотрщик закладок.
-   `BookmarkViewerDemo.js`: Демонстрация просмотрщика закладок.
-   `BookmarkViewerIntegration.js`: Интеграция просмотрщика закладок.
-   `ComicTranslationPanel.js`: Панель перевода комиксов.
-   `ComicViewerIntegration.js`: Интеграция просмотрщика комиксов.
-   `EInkAdapter.js`: Адаптер для E-Ink устройств.
-   `EInkDemo.js`: Демонстрация E-Ink.
-   `EInkIntegration.js`: Интеграция E-Ink.
-   `EngineSelectionIntegration.js`: Интеграция выбора движка.
-   `FeedbackForm.js`: Форма обратной связи.
-   `FontEditorPanel.js`: Панель редактора шрифтов.
-   `GestureDemo.js`: Демонстрация жестов.
-   `GestureIntegration.js`: Интеграция жестов.
-   `GestureManager.js`: Менеджер жестов.
-   `OverlayRenderer.js`: Рендерер наложений.
-   `PluginSettingsPanel.js`: Панель настроек плагинов.
-   `ProfileManagerPanel.js`: Панель менеджера профилей.
-   `ProgressIntegration.js`: Интеграция прогресса.
-   `ProgressManager.js`: Менеджер прогресса.
-   `ScalingDemo.js`: Демонстрация масштабирования.
-   `ScalingManager.js`: Менеджер масштабирования.
-   `SettingsPanel.js`: Панель настроек.
-   `TabletAdapter.js`: Адаптер для планшетов.
-   `TabletDemo.js`: Демонстрация планшетов.
-   `TabletIntegration.js`: Интеграция планшетов.
-   `ThemeDemo.js`: Демонстрация тем.
-   `ThemeEditorPanel.js`: Панель редактора тем.
-   `ThemeIntegration.js`: Интеграция тем.
-   `ThemeManager.js`: Менеджер тем.
-   `UIScalingIntegration.js`: Интеграция масштабирования UI.
-   `mr_comic_ready_project.code-workspace`: Файл рабочего пространства VS Code.
-   `plugin-settings-panel.css`: CSS для панели настроек плагинов.



### `tests/`

Директория `tests/` содержит все тесты для проекта Mr.Comic, обеспечивающие проверку функциональности и стабильности различных компонентов.

#### `tests/integration/`

Интеграционные тесты, проверяющие взаимодействие между различными модулями и системами.

-   `test_e2e_flow.py`: Сквозные тесты, проверяющие полный рабочий процесс приложения.

#### `tests/mocks/`

Моки и заглушки, используемые в тестах для изоляции компонентов.

-   `mock-classes.js`: Определение мок-классов.

#### `tests/unit/`

Юнит-тесты, проверяющие отдельные функции и классы.

-   `test_dictionaries.py`: Тесты для функциональности словарей.
-   `test_fallback.py`: Тесты для логики fallback.
-   `test_ocr.py`: Тесты для OCR-функциональности.

### `themes_store/`

Директория `themes_store/` содержит файлы, относящиеся к темам оформления приложения Mr.Comic.

-   `CONTRIBUTING.md`: Руководство по внесению вклада в создание тем (возможно, шаблон).
-   `README.md`: Описание структуры и использования тем.
-   `themes_index.json`: Индексный файл, содержащий список доступных тем и метаданные о них.

#### `themes_store/dark_amoled/`

Пример директории для конкретной темы оформления.

-   `preview.png`: Изображение-превью темы.
-   `theme.json`: Файл конфигурации темы, определяющий цвета, шрифты и другие стилистические параметры.



## Корневые файлы проекта

В корневой директории проекта Mr.Comic находятся следующие важные файлы:

-   `README.md`: Основной файл документации проекта, предоставляющий общее описание Mr.Comic, его ключевые возможности, инструкции по быстрому старту и ссылки на более подробную документацию.
-   `TASKLIST.md`: Подробный план разработки проекта, разбитый на фазы и дни, с отметками о выполнении задач. Этот файл служит дорожной картой для команды разработчиков.
-   `requirements.txt`: Список зависимостей Python, необходимых для запуска Python-компонентов проекта (например, OCR и перевод).
-   `build.gradle`: Файлы конфигурации Gradle для сборки Android-проекта. Определяют зависимости, плагины, версии SDK и другие параметры сборки.
-   `settings.gradle`: Файл настроек Gradle, который определяет, какие модули включены в проект.
-   `.gitignore`: Файл, указывающий Git, какие файлы и директории следует игнорировать при отслеживании изменений в репозитории.
-   `.gitattributes`: Файл, определяющий атрибуты для путей в репозитории, например, как Git должен обрабатывать переводы строк.
-   `LICENSE`: Файл, содержащий информацию о лицензии проекта (будет добавлен).
-   `CONTRIBUTING.md`: Руководство для контрибьюторов, описывающее процесс внесения изменений в проект (будет добавлен).


